<div class="page-head">
  <h2 class="pull-left">
    {{ $page_title }}
    <span class="page-meta"
      ><a href="#" class="btn btn-primary btn-xs show_hide">{{
        lang('show_hide')
      }}</a></span
    >
  </h2>
</div>
<div class="clearfix"></div>
<div class="matter">
  <div class="container">
    <div class="form">
      <p>Please customize the report below.</p>
      <!-- <?php $attrib = array('class' => 'form-horizontal'); echo form_open("reports/sales")}} -->
      <div class="form-group">
        <label for="product">{{ lang('product') }}</label>
        <div class="controls">
          <input
            name="product"
            [(ngModel)]="searchParams.productName"
            class="form-control"
            id="product"
          />
          <!-- {{ form_input('product', (isset($_POST['product']) ? $_POST['product'] : ""), 'class="form-control" id="product"');?> </div> -->
        </div>

        <div class="row">
          <div class="col-md-6">
            <div class="form-group">
              <label for="customer">{{ lang('customer') }}</label>
              <div class="controls">
                <select
                  name="customer"
                  class="customer form-control"
                  data-placeholder="Select customer"
                  id="customer"
                  [(ngModel)]="searchParams.customerId"
                >
                  <option value="null" disabled="true" [selected]="true"
                    >Select Customer</option
                  >
                  <option *ngFor="let row of $customers" value="{{ row.id }}">{{
                    row.company
                  }}({{
                    row.name
                  }})</option>
                </select>
                <!-- <?php 
							$cu[""] = lang("select")." ".lang("customer");
							foreach($customers as $customer){
								$cu[$customer->id] = $customer->company .' ('.$customer->name.')';
							}
							echo form_dropdown('customer', $cu, (isset($_POST['customer']) ? $_POST['customer'] : ""), 'class="form-control customer" data-placeholder="'.lang("select")." ".lang("customer").'" id="customer" style="width:100%;"'); 
							?> -->
              </div>
            </div>
            <div class="form-group">
              <label for="customFields">{{ lang('Custom Fields') }}</label>
              <div class="controls">
                <input
                  name="customFields"
                  [(ngModel)]="searchParams.customerFields"
                  class="form-control tip"
                  id="customFields"
                />
              </div>

              <!-- {{ lang('cfs', 'cf') }}
              {{
                form_input(
                  'cf',
                  set_value('cf'),
                  'class="form-control tip" id="cf"'
                )
              }} -->
            </div>
            <div class="form-group">
              <label for="user">{{ lang('created_by') }}</label>
              <div class="controls">
                <!-- <?php 
							$us[""] = lang("select")." ".lang("user");
							foreach($users as $user){
								$us[$user->id] = $user->first_name.' '.$user->last_name; } echo
                form_dropdown('user', $us, (isset($_POST['user']) ?
                $_POST['user'] : ""), 'class="form-control user"
                data-placeholder="'.lang("select")." ".lang("user").'" id="user"
                style="width:100%;"'); ?> -->
                <select
                  style="width:100%;"
                  name="createdBy"
                  class="customer form-control"
                  data-placeholder="Select User"
                  id="user"
                  [(ngModel)]="searchParams.createdBy"
                >
                  <option value="null" disabled="true" [selected]="true"
                    >Select User</option
                  >
                  <option *ngFor="let row of $users" value="{{ row.id }}">{{
                    row.firstName
                  }} {{
                    row.lastName
                  }}</option>
                </select>
              </div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group">
              <label for="customer">{{ lang('status') }}</label>
              <div class="controls">
                <select
                  name="status"
                  class="status form-control"
                  data-placeholder="Select Status"
                  id="status"
                  style="width: 100%;"
                  [(ngModel)]="searchParams.status"
                >
                  <option value="null" disabled="true" [selected]="true"
                    >Select Status</option
                  >
                  <option value="canceled">{{ lang('canceled') }}</option>
                  <option value="overdue">{{ lang('overdue') }}</option>
                  <option value="paid">{{ lang('paid') }}</option>
                  <option value="partially_paid">{{
                    lang('partially_paid')
                  }}</option>
                  <option value="pending">{{ lang('pending') }}</option>
                </select>
                <!-- 
                <?php 
							$st = array(
								'' 		=>
                lang('select').' '.lang('status'), lang('cancelled') =>
                lang('cancelled'), lang('overdue') => lang('overdue'),
                lang('paid') => lang('paid'), lang('partially_paid') =>
                lang('partially_paid'), lang('pending') => lang('pending') );
                echo form_dropdown('status', $st, (isset($_POST['status']) ?
                $_POST['status'] : ""), 'class="status form-control"
                data-placeholder="'.lang("select")." ".lang("status").'"
                id="status" style="width:100%;"'); ?> -->
              </div>
            </div>
            <div class="form-group">
              <label for="start_date">{{ lang('start_date') }}</label>
              <div class="controls">
                <input
                  type="date"
                  name="start_date"
                  [(ngModel)]="searchParams.startDate"
                  class="form-control date"
                  id="start_date"
                />
                <!-- {{ form_input('start_date', (isset($_POST['start_date']) ?
                $_POST['start_date'] : ""), 'class="form-control date"
                id="start_date"');?> -->
              </div>
            </div>
            <div class="form-group">
              <label for="end_date">{{ lang('end_date') }}</label>
              <!-- <?php $date = date($dateFormats['php_sdate'])}} -->
              <div class="controls">
                <!-- {{ form_input('end_date', (isset($_POST['end_date']) ?
              $_POST['end_date'] : $date), 'class="form-control date"
              id="end_date"');?> -->
                <input
                  type="date"
                  name="end_date"
                  [(ngModel)]="searchParams.endDate"
                  class="form-control date"
                  id="end_date"
                />
              </div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <div class="controls">
            <button class="btn btn-primary btn-lg" (click)="searchSalesReport()">
              {{ lang('submit') }}
            </button>
            <!-- {{ form_submit('submit', lang("submit"), 'class="btn btn-primary"');?> -->
          </div>
        </div>
        <!-- {{ form_close();?> -->
      </div>
      <div class="clearfix"></div>
      <!-- <?php if($this->input->post('submit')) { ?> -->
      <!-- <?php if($this->input->post('customer')){ ?> -->
      <div *ngIf="searchUser" class="widget wlightblue">
        <div class="widget-head">
          <div class="pull-left">
            {{ lang('name') }}:
            <strong>{{ searchUser.name }}</strong>
            &nbsp;&nbsp;&nbsp;&nbsp;{{ lang('email') }}:
            <strong>{{ searchUser.email }}</strong>
            &nbsp;&nbsp;&nbsp;&nbsp;{{ lang('phone') }}:
            <strong>{{ searchUser.phone }}</strong>
          </div>
          <div class="widget-icons pull-right">
            <a class="wminimize" href="#"><i class="icon-chevron-up"></i></a>
            <a class="wclose" href="#"><i class="icon-remove"></i></a>
          </div>
          <div class="clearfix"></div>
        </div>

        <div class="widget-content">
          <div class="padd">
            <ul class="today-datas">
              <li class="bviolet">
                <span class="bold" style="font-size:24px;">
                  <!-- <?php /* echo $Settings->currency_prefix."
                  ".$total['total_amount']; */ ?>  -->
                  {{ $total }}</span
                ><br />
                {{ lang('total') }} {{ lang('invoices') }}
                <div class="clearfix"></div>
              </li>
              <li class="bgreen">
                <span class="bold" style="font-size:24px;">
                  <!-- <?php /* echo $Settings->currency_prefix."
                  ".$paid['total_amount'];*/ ?> -->
                  {{ $paid }}</span
                ><br />
                {{ lang('paid') }}
                <div class="clearfix"></div>
              </li>
              <li class="bblue">
                <span class="bold" style="font-size:24px;">{{ $pp }}</span
                ><br />
                {{ lang('partially_paid') }}
                <div class="clearfix"></div>
              </li>
              <li class="borange">
                <span class="bold" style="font-size:24px;">{{ $pending }}</span
                ><br />
                {{ lang('pending') }}
                <div class="clearfix"></div>
              </li>
              <li class="bred">
                <span class="bold" style="font-size:24px;">{{ $overdue }}</span
                ><br />
                {{ lang('overdue') }}
                <div class="clearfix"></div>
              </li>
              <li class="bred" style="background:#000 !important;">
                <span class="bold" style="font-size:24px;">{{
                  $cancelled
                }}</span
                ><br />
                {{ lang('cancelled') }}
                <div class="clearfix"></div>
              </li>
            </ul>
            <hr />
            <ul class="today-datas t">
              <li class="bviolet">
                <span class="bold" style="font-size:24px;">
                  <!-- <?php /* echo $Settings->currency_prefix."
                  ".$total['total_amount']; */ ?> -->
                  {{ formatMoney($tpp.total) }}</span
                ><br />
                {{ lang('total') }} {{ lang('amount') }}
                <div class="clearfix"></div>
              </li>
              <li class="bgreen">
                <span class="bold" style="font-size:24px;">
                  <!-- <?php /* echo $Settings->currency_prefix."
                  ".$paid['total_amount'];*/ ?> -->
                  {{ formatMoney($tpp.paid) }}
                  <!-- {{ $this->sim->formatMoney($tpp->paid)}} --> </span
                ><br />
                {{ lang('paid') }} {{ lang('amount') }}
                <div class="clearfix"></div>
              </li>
              <li class="borange">
                <span class="bold" style="font-size:24px;">
                  <!-- {{ $this->sim->formatMoney(($tpp->total - $tpp->paid))}} -->
                  {{ formatMoney($tpp.total - $tpp.paid) }} </span
                ><br />
                {{ lang('balance') }} {{ lang('amount') }}
                <div class="clearfix"></div>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!-- <?php }	?> -->

      <table
        id="fileData"
        class="table table-bordered table-hover table-striped"
        style="margin: 0 0 5px 0;"
      >
        <thead>
          <tr class="active">
            <th class="col-xs-1">{{ lang('id') }}</th>
            <th class="col-xs-1">{{ lang('date') }}</th>
            <th class="col-xs-2">{{ lang('billing_company') }}</th>
            <th class="col-xs-1">{{ lang('reference_no') }}</th>
            <th class="col-xs-1">{{ lang('created_by') }}</th>
            <th class="col-xs-2">{{ lang('customer') }}</th>
            <th class="col-xs-1">{{ lang('total') }}</th>
            <th class="col-xs-1">{{ lang('paid') }}</th>
            <th class="col-xs-1">{{ lang('balance') }}</th>
            <th class="col-xs-1">{{ lang('due_date') }}</th>
            <th class="col-xs-1">{{ lang('status') }}</th>
          </tr>
        </thead>
        <!-- <tbody>
          <tr>
            <td colspan="11" class="dataTables_empty">
              {{ lang('loading_data_from_server') }}
            </td>
          </tr>
        </tbody> -->
        <tbody>
          <tr *ngFor="let row of sales; let i = index">
            <td>{{ row.id }}</td>
            <td>{{ row.date }}</td>
            <td>{{ row.companyName }}</td>
            <td>{{ row.referenceNo }}</td>
            <td>{{ row.userName }}</td>
            <td>{{ row.customerName }}</td>
            <td>{{ formatMoney(row.grandTotal) }}</td>
            <!-- <td>{{ row.totalTax }}</td> -->
            <!-- <td>{{ row.shipping }}</td> -->
            <td>{{ formatMoney(row.paid) }}</td>
            <td>{{ formatMoney(row.grandTotal - row.paid) }}</td>
            <td>{{ row.dueDate }}</td>
            <td>{{ row.status }}</td>
          </tr>
        </tbody>
        <tfoot>
          <!-- <tr>
            <th class="col-xs-1">{{ lang('id') }}</th>
            <th class="col-xs-1">{{ lang('date') }}</th>
            <th class="col-xs-2">{{ lang('billing_company') }}</th>
            <th class="col-xs-1">{{ lang('reference_no') }}</th>
            <th class="col-xs-1">{{ lang('created_by') }}</th>
            <th class="col-xs-2">{{ lang('customer') }}</th>
            <th class="col-xs-1">{{ lang('total') }}</th>
            <th class="col-xs-1">{{ lang('paid') }}</th>
            <th class="col-xs-1">{{ lang('balance') }}</th>
            <th class="col-xs-1">{{ lang('due_date') }}</th>
            <th class="col-xs-1">{{ lang('status') }}</th>
          </tr> -->
          <tr>
            <td colspan="11" class="p0">
              <input
                type="text"
                class="form-control b0"
                name="search_table"
                id="search_table"
                placeholder="{{ lang('type_hit_enter') }}"
                style="width:100%;"
              />
            </td>
          </tr>
        </tfoot>
      </table>
      <!-- <?php 
	}
	?> -->
      <div class="clearfix"></div>
    </div>
    <div class="clearfix"></div>
  </div>
</div>
